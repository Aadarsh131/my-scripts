<div class="markdown prose w-full break-words dark:prose-invert dark"><p>This Python script reduces the size of a scanned PDF by processing its images. Here's a breakdown of its functionality:</p><h3>Key Features:</h3><ol><li><p><strong>Interactive Cropping</strong>:</p><ul><li>Allows the user to visually select cropping areas on individual PDF pages (converted to images) using a graphical interface.</li><li>Cropping coordinates are saved to a JSON file for future use.</li></ul></li><li><p><strong>PDF Size Reduction</strong>:</p><ul><li>Converts the images in the PDF to grayscale to reduce size.</li><li>Compresses the images using JPEG format with adjustable quality.</li><li>Optionally crops the pages based on predefined coordinates.</li></ul></li><li><p><strong>Image Downsampling</strong>:</p><ul><li>Converts PDF pages to images with a specific DPI (dots per inch) to control resolution.</li></ul></li><li><p><strong>Preservation</strong>:</p><ul><li>For pages without images, it directly copies the content to the new PDF.</li></ul></li><li><p><strong>Reusable Workflow</strong>:</p><ul><li>Saves and loads cropping coordinates, enabling repeatable cropping without reselecting regions.</li></ul></li></ol><h3>Process Overview:</h3><ol><li><p><strong>Cropping Coordination</strong>:</p><ul><li>If <code>enable_cropping</code> is enabled, it either:<ul><li>Loads predefined crop coordinates from <code>crop_coords.json</code>.</li><li>Allows interactive selection of crop areas, saving the selections for reuse.</li></ul></li></ul></li><li><p><strong>PDF Processing</strong>:</p><ul><li>Reads the input PDF page by page.</li><li>Extracts images from each page and converts them to grayscale.</li><li>Crops the images (if enabled) using provided or interactively chosen coordinates.</li><li>Compresses the images and inserts them into a new PDF.</li></ul></li><li><p><strong>Output</strong>:</p><ul><li>Produces a compressed PDF with reduced file size, either cropped or uncropped based on user preference.</li></ul></li></ol><h3>Example Use Case:</h3><ul><li>Input: A scanned PDF document.</li><li>Output: A smaller-sized PDF, possibly cropped and converted to grayscale, making it more storage and transfer-friendly.</li></ul><p>The script is suitable for creating smaller PDFs from scanned documents while maintaining control over cropping, quality, and resolution.</p></div>